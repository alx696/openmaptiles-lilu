# 补充

## 下载指定区域OSM数据

查看可用区域:

```shell
make list-geofabrik | more
```

> 按 Enter 键下一页, 按 q 键退出.

下载区域数据:

```shell
make download-osmfr area=asia/china/sichuan
```

## 导入Wikidata数据时使用代理

天朝需要科学上网, 修改 `.env` 和 `Makefile` 中的 WIKIDATA_PROXY !

## 定义 style.json 注意

`source-layer` 相同时, 必须使用 `filter` 进行区分才能定义不同的样式! 例如 `transportation_name` 中的 `style.json` , 如果不过滤则只有首先被应用的样式才会生效!

---

# 调试

```shell
make clean && \
make && \
make import-sql && \
make build-style && \
make stop-maputnik && \
make start-maputnik
```

在线调试样式:

```
http://localhost/map/sprite/sprite

http://localhost/map/glyphs/{fontstack}/{range}.pbf

  "sprite": "http://localhost/map/sprite/sprite",
  "glyphs": "http://localhost/map/glyphs/{fontstack}/{range}.pbf",
  "sources": {
    "openmaptiles": {
      "type": "vector",
      "url": "http://localhost:8090"
    }
  },
```

---

# 生成

```shell
make generate-tiles-pg
```

启动服务 http://localhost:8080 :

```shell
make start-tileserver
```

停止服务:

```shell
make stop-tileserver
```

---

